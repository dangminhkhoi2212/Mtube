import{_ as m,x as L,K as _,L as y,B as k,f as r,g as c,j as d,k as v,m as t,z as l,s as p,t as f,P as g,l as S,u as x}from"./index-fe041298.js";const C={setup(){return{accountStore:L()}},props:{account:{type:Object}},components:{AvatarCircle:_,Loading:y},data(){return{accountIdStore:this.accountStore.account._id,accountPropsLocal:this.account,isFollow:!1,isProfilePage:this.$route.name==="profile",isDetailPage:this.$route.name==="detail",isSearchPage:this.$route.name==="search",isMyProfile:this.accountStore.account._id===this.account._id,loading:{isLoading:!1,isfullPage:!1,onCancel:!1}}},methods:{async handleFollow(n){try{if(this.loading.isLoading=!0,this.accountIdStore!==this.account._id){var e=await k.handleFollow(this.accountIdStore,this.account._id,n);this.accountPropsLocal=e,await this.accountStore.getAccount(),this.checkFollow()}this.loading.isLoading=!1}catch(i){this.loading.isLoading=!1,console.log("ðŸš€ ~ file: Profile.vue:192 ~ follow ~ error:",i)}},checkFollow(){this.isFollow=this.accountPropsLocal.followers.includes(this.accountIdStore)}},async mounted(){this.checkFollow()}},F={class:"m-0"},b={key:1};function A(n,e,i,a,o,u){const h=r("AvatarCircle"),w=r("Loading"),P=r("RouterLink");return o.accountPropsLocal?(c(),d(P,{key:o.accountPropsLocal,to:{name:"profile",params:{accountId:o.accountPropsLocal._id}}},{default:v(()=>[(c(),t("div",{key:a.accountStore.account.followers||a.accountStore.account.following,class:x(["d-flex align-items-center px-3 py-2 rounded-3",o.isMyProfile&&(o.isProfilePage||o.isDetailPage||o.isSearchPage)?"justify-content-start":"justify-content-around"]),style:{"backdrop-filter":"blur(30px)",width:"320px","box-shadow":"0 0 1px 1px var(--box_shadow_card)"}},[o.accountPropsLocal.avatar?(c(),d(h,{key:0,class:"mx-2",src:o.accountPropsLocal.avatar.url},null,8,["src"])):l("",!0),p("div",null,[p("p",F,f(o.accountPropsLocal.name),1),o.accountPropsLocal.followers?(c(),t("p",{class:"m-0",key:o.accountPropsLocal.followers.length,style:{"font-size":"0.8rem"}},f(o.accountPropsLocal.followers.length.toLocaleString("en-US"))+" Followers ",1)):l("",!0)]),o.accountPropsLocal._id!==a.accountStore.account._id?(c(),t("div",b,[o.isFollow?(c(),t("button",{key:1,class:"px-2 py-1 rounded-5",onClick:e[1]||(e[1]=g(s=>u.handleFollow("unfollow"),["prevent"]))}," Unfollow ")):(c(),t("button",{key:0,class:"px-2 py-1 rounded-5",onClick:e[0]||(e[0]=g(s=>u.handleFollow("follow"),["prevent"]))}," Follow ")),S(w,{active:o.loading.isLoading,"onUpdate:active":e[2]||(e[2]=s=>o.loading.isLoading=s),"can-cancel":o.loading.onCancel,"is-full-page":o.loading.isfullPage,opacity:.5,class:"rounded-3",backgroundColor:"#170f23 !important",color:"#c6bcd3",loader:"bars"},null,8,["active","can-cancel","is-full-page"])])):l("",!0)],2))]),_:1},8,["to"])):l("",!0)}const I=m(C,[["render",A]]);export{I as P};
