import{_,x as f,A as h,L as v,B as y,f as l,g as w,m as x,s,l as n,k as i,C as c,D as L,E as b}from"./index-fe041298.js";import{a as d}from"./myAlert-3f04436f.js";import{l as S}from"./ChatEngine-f7ab99e7.js";const k={setup(){const o=f(),e=h();return{accountStore:o,extraStore:e}},data(){return{username:"",password:"",account:{},message:"",loading:{isLoading:!1,isFullPage:!0,onCancel:!1}}},components:{Loading:v},methods:{async gotoHome(){try{if(this.loading.isLoading=!0,this.account=await y.getLogin(this.username,this.password),!this.account||Object.keys(this.account).length===0){d.myAlert("error","Don't find your account!");return}localStorage.setItem("id",this.account._id),this.accountStore.updateAccount(this.account),localStorage.setItem("token",this.account.token),await S("@"+this.username,this.account._id),this.loading.isLoading=!1,this.$router.push({name:"home"})}catch(o){this.loading.isLoading=!1,d.myAlert("error",o.response.data.message)}}},mounted(){this.accountStore.removeAccount()}},u=o=>(L("data-v-603f5764"),o=o(),b(),o),V={class:"page vh-100 vw-100"},I={id:"main",class:"w-100 h-100 d-flex justify-content-center align-items-center"},A={class:"rounded-4 my-sm-5 p-4 col-12 col-sm-10 col-md-8 col-lg-6 col-xxl-4 vh-90 overflow-auto",style:{"backdrop-filter":"blur(50px)"}},C=u(()=>s("div",{class:"mx-auto",style:{width:"30%",height:"30%"}},[s("h1",null,"Login")],-1)),U={class:"row"},B=u(()=>s("button",{class:"submit col-md-6 offset-md-3 rounded-2 py-1 my-2",type:"submit"}," Login ",-1)),E={class:"d-flex justify-content-center"};function j(o,e,F,N,t,m){const r=l("FormKit"),p=l("router-link"),g=l("Loading");return w(),x("div",V,[s("div",I,[s("div",A,[C,s("div",U,[n(r,{type:"form",onSubmit:e[2]||(e[2]=a=>m.gotoHome()),actions:!1},{default:i(()=>[n(r,{label:"Username",type:"text",validation:"required|length:5",placeholder:"Your username",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.username=a)},null,8,["modelValue"]),n(r,{type:"password",name:"password",value:"super-secret",label:"Password",help:"Enter a new password",validation:"required",placeholder:"Your password",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=a=>t.password=a)},null,8,["modelValue"]),B]),_:1}),s("div",E,[s("p",null,[c(" If you don't have accout, "),n(p,{to:{name:"register"},class:"fs-4 px-2 rounded-2",style:{color:"var(--text)","background-color":"var(--btn)"}},{default:i(()=>[c(" Register ")]),_:1})])])])])]),n(g,{active:t.loading.isLoading,"onUpdate:active":e[3]||(e[3]=a=>t.loading.isLoading=a),"can-cancel":t.loading.onCancel,"is-full-page":t.loading.fullPage,opacity:1,backgroundColor:"#170f23 !important",color:"#c6bcd3",loader:"bars"},null,8,["active","can-cancel","is-full-page"])])}const H=_(k,[["render",j],["__scopeId","data-v-603f5764"]]);export{H as default};
