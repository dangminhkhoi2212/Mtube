import{_ as u,x as f,N as g,H as h,L as p,B as a,f as l,g as d,m as y,s,t as _,j as V,y as b,z as A,l as w}from"./index-db56849a.js";import{A as L,c as C}from"./Artplayer-de72f935.js";import{V as F}from"./VideoCard-7688e56f.js";import{a as i}from"./myAlert-04d91481.js";const x={setup(){return{accountStore:f()}},components:{Navigation:g,Header:h,Artplayer:L,VideoCard:F,Loading:p},data(){return{videos:[],option:{},style:{height:"180px",borderRadius:"var(--border_radius_video)"},loading:{isLoading:!1,fullPage:!1,onCancel:!1}}},methods:{async getFavoriteVideos(){try{this.videos=await a.getFavoriteVideos(this.accountStore.account._id),this.formatDateVideo()}catch(e){console.log("ðŸš€ ~ file: FavoriteVideo.vue:50 ~ getFavoriteVideos ~ error:",e)}},formatDateVideo(){this.videos=this.videos.map(e=>(e.publishedAt=C(e.publishedAt),e))},async removeFavoriteVideo(e){if(await i.myConfirm("Are you sure","warning","You want to remove this favorite video","Yes, delete it!"))try{this.loading.isLoading=!0,this.videos=await a.removeFavoriteVideo(this.accountStore.account._id,e),i.myAlert("success","Your video has been deleted."),this.formatDateVideo(),this.loading.isLoading=!1}catch{i.myAlert("Error!","Don't delete this video! "),this.loading.isLoading=!1}},async clearAll(){if(await i.myConfirm("Are you sure?","warning","Delete all favorite videos ?","Yes, delete it!"))try{this.loading.isLoading=!0,this.videos=await a.removeAllFavoriteVideos(this.accountStore.account._id),i.myAlert("success","All videos has been deleted."),this.loading.isLoading=!1}catch{i.myAlert("error","Don't delete this all videos ! "),this.loading.isLoading=!1}}},computed:{},async mounted(){await this.getFavoriteVideos()}},S={id:"main vw-100",class:"overflow-y"},k={class:"d-flex justify-content-between align-items-center py-2 sticky-top",style:{"z-index":"1 !important","background-color":"var(--violet_100)","border-top":"1px solid var(--border)","border-bottom":"1px solid var(--border)"}},D={class:"ms-2"},B={class:"fs-5"},N=s("span",null,"Clear All",-1),Y={class:"container vl-parent",style:{height:"80vh","overflow-y":"auto"}};function z(e,t,c,R,o,r){const v=l("VideoCard"),m=l("Loading");return d(),y("section",S,[s("div",k,[s("h4",D,"You have "+_(o.videos.length)+" videos",1),s("div",B,[N,s("i",{class:"fa-solid fa-trash btn-reacte rounded-4 mx-3",onClick:t[0]||(t[0]=n=>r.clearAll())})])]),s("div",Y,[o.videos?(d(),V(v,{key:0,videos:o.videos,option:o.option,style:b(o.style),class:"customArtplayer",onRemoveFavoriteVideo:r.removeFavoriteVideo},null,8,["videos","option","style","onRemoveFavoriteVideo"])):A("",!0),w(m,{active:o.loading.isLoading,"onUpdate:active":t[1]||(t[1]=n=>o.loading.isLoading=n),"can-cancel":o.loading.onCancel,"is-full-page":o.loading.fullPage,opacity:.5,backgroundColor:"#170f23 !important",color:"#c6bcd3",loader:"bars"},null,8,["active","can-cancel","is-full-page"])])])}const U=u(x,[["render",z]]);export{U as default};
